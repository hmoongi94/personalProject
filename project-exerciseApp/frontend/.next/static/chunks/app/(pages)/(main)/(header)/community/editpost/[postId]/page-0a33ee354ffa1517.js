(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[389],{43525:function(e,t,a){Promise.resolve().then(a.bind(a,49770))},49770:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return l}});var n=a(3827),r=a(64090),s=a(47907),o=e=>{let{initialContent:t,initialImages:a}=e,[o,l]=r.useState(t),[i,c]=r.useState([]),[u,d]=r.useState(a.split(",")),{postId:h}=(0,s.useParams)(),m=e=>{c(t=>{let a=[...t];return a.splice(e,1),a}),d(t=>{let a=[...t];return a.splice(e,1),a})},f=async()=>{try{let e=localStorage.getItem("token");if(!e){window.confirm("로그인이 필요합니다. 로그인 페이지로 이동하시겠습니까?")&&(window.location.href="/login");return}let t=await fetch("http://localhost:3560/community/editFeed/".concat(h),{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({content:o})});if(!t.ok)throw Error("Failed to update.");console.log("Post updated successfully:",t),alert("게시물이 업데이트되었습니다."),window.location.href="/community"}catch(e){console.error("Error updating post:"),alert("게시물 업데이트에 실패했습니다.")}};return(0,n.jsxs)("div",{className:"w-2/3 flex flex-col items-center justify-center text-black",children:[(0,n.jsx)("textarea",{className:"w-10/12",value:o,onChange:e=>l(e.target.value),placeholder:"Enter your text...",rows:10}),(0,n.jsxs)("div",{className:"w-10/12 flex justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"fileInput",className:"text-white",children:"Select images:"}),(0,n.jsx)("input",{type:"file",id:"fileInput",accept:"image/*",multiple:!0,onChange:e=>{let t=e.target.files;if(t){let e=Array.from(t);c(t=>[...t,...e]);let a=[];for(let e=0;e<t.length;e++){let n=new FileReader;n.onload=()=>{2===n.readyState&&(a.push(n.result),a.length===t.length&&d(e=>[...e,...a]))},n.readAsDataURL(t[e])}}}})]}),(0,n.jsx)("button",{onClick:f,className:"bg-blue-500 text-white px-4 py-2 rounded",children:"Update Post"})]}),(0,n.jsx)("div",{className:"flex w-10/12",children:u.map((e,t)=>(0,n.jsxs)("div",{children:[(0,n.jsx)("img",{src:"/community/".concat(e),alt:"Preview ".concat(t),style:{width:"14vw",height:"12vw"}}),(0,n.jsx)("button",{className:"bg-red-500 text-white px-4 py-2 rounded",onClick:()=>m(t),children:"delete"})]},t))})]})},l=()=>{let{postId:e}=(0,s.useParams)(),[t,a]=(0,r.useState)(null);return((0,r.useEffect)(()=>{(async()=>{try{let t=await fetch("http://localhost:3560/community/editpost/".concat(e)),n=await t.json();if(!t.ok)throw Error("게시물 데이터를 불러오는데 실패했습니다.");a(n)}catch(e){console.error("게시물 데이터를 불러오는 동안 에러가 발생했습니다:",e)}})()},[e]),t)?(0,n.jsx)(o,{initialContent:t.content,initialImages:t.imgurl}):(0,n.jsx)("div",{children:"Loading..."})}},47907:function(e,t,a){"use strict";var n=a(15313);a.o(n,"useParams")&&a.d(t,{useParams:function(){return n.useParams}}),a.o(n,"usePathname")&&a.d(t,{usePathname:function(){return n.usePathname}}),a.o(n,"useRouter")&&a.d(t,{useRouter:function(){return n.useRouter}}),a.o(n,"useSearchParams")&&a.d(t,{useSearchParams:function(){return n.useSearchParams}})}},function(e){e.O(0,[971,69,744],function(){return e(e.s=43525)}),_N_E=e.O()}]);