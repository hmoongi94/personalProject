(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[301],{66410:function(e,t,l){Promise.resolve().then(l.bind(l,99441))},99441:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return i}});var r=l(3827),a=l(64090),n=()=>{let[e,t]=(0,a.useState)([]),[l,n]=(0,a.useState)([]),[i,s]=(0,a.useState)(""),o=e=>{t(t=>{let l=[...t];return l.splice(e,1),l}),n(t=>{let l=[...t];return l.splice(e,1),l})},c=async()=>{try{let t=new FormData;e.forEach(e=>{t.append("images",e)}),t.append("text",i);let l=localStorage.getItem("token");if(!l){window.confirm("로그인이 필요합니다. 로그인 페이지로 이동하시겠습니까?")&&(window.location.href="/login");return}if(!(await fetch("http://localhost:3560/community/registerFeed",{method:"POST",headers:{Authorization:"Bearer ".concat(l)},body:t})).ok)throw Error("Failed to upload images.");alert("피드글이 작성되었습니다."),window.location.href="/community"}catch(e){console.error("Error uploading images:",e)}};return(0,r.jsxs)("div",{className:"w-2/3 flex flex-col items-center justify-center text-black",children:[(0,r.jsx)("textarea",{className:"w-10/12",value:i,onChange:e=>s(e.target.value),placeholder:"Enter your text...",rows:10}),(0,r.jsxs)("div",{className:"w-10/12 flex justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"fileInput",className:"text-white",children:"Select images:"}),(0,r.jsx)("input",{type:"file",id:"fileInput",accept:"image/*",multiple:!0,onChange:l=>{let r=l.target.files;if(r){if(r.length+e.length>5){alert("You can upload up to 5 images.");return}let l=Array.from(r);t(e=>[...e,...l]);let a=[];for(let e=0;e<r.length;e++){let t=new FileReader;t.onload=()=>{2===t.readyState&&(a.push(t.result),a.length===r.length&&n(e=>[...e,...a]))},t.readAsDataURL(r[e])}}}})]}),(0,r.jsx)("button",{onClick:c,className:"bg-blue-500 text-white px-4 py-2 rounded",children:"Upload Feed"})]}),(0,r.jsx)("div",{className:"flex w-10/12",children:l.map((e,t)=>(0,r.jsxs)("div",{children:[(0,r.jsx)("img",{src:e,alt:"Preview ".concat(t),style:{width:"14vw",height:"12vw"}}),(0,r.jsx)("button",{className:"bg-red-500 text-white px-4 py-2 rounded",onClick:()=>o(t),children:"delete"})]},t))})]})},i=()=>(0,r.jsx)("div",{className:"w-screen h-screen flex justify-center items-center",children:(0,r.jsx)(n,{})})}},function(e){e.O(0,[971,69,744],function(){return e(e.s=66410)}),_N_E=e.O()}]);